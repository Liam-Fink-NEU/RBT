{"ast":null,"code":"\"use strict\";\n\nconst nodeType = require(\"../node-type.js\");\n\nconst FocusEvent = require(\"../generated/FocusEvent.js\");\n\nconst idlUtils = require(\"../generated/utils.js\");\n\nconst {\n  isDisabled\n} = require(\"./form-controls.js\");\n\nconst {\n  firstChildWithLocalName\n} = require(\"./traversal\");\n\nconst {\n  createAnEvent\n} = require(\"./events\");\n\nconst {\n  HTML_NS\n} = require(\"./namespaces\");\n\nconst focusableFormElements = new Set([\"input\", \"select\", \"textarea\", \"button\"]); // https://html.spec.whatwg.org/multipage/interaction.html#focusable-area, but also some of\n// https://html.spec.whatwg.org/multipage/interaction.html#focusing-steps: e.g., Documents are not actually focusable\n// areas, but their viewports are, and the first step of the latter algorithm translates Documents to their viewports.\n// And also https://html.spec.whatwg.org/multipage/interaction.html#specially-focusable!\n\nexports.isFocusableAreaElement = elImpl => {\n  if (!elImpl._ownerDocument._defaultView && !elImpl._defaultView) {\n    return false;\n  }\n\n  if (elImpl._nodeType === nodeType.DOCUMENT_NODE) {\n    return true;\n  }\n\n  if (!Number.isNaN(parseInt(elImpl.getAttributeNS(null, \"tabindex\")))) {\n    return true;\n  }\n\n  if (elImpl._namespaceURI === HTML_NS) {\n    if (elImpl._localName === \"iframe\") {\n      return true;\n    }\n\n    if (elImpl._localName === \"a\" && elImpl.hasAttributeNS(null, \"href\")) {\n      return true;\n    }\n\n    if (elImpl._localName === \"summary\" && elImpl.parentNode && elImpl.parentNode._localName === \"details\" && elImpl === firstChildWithLocalName(elImpl.parentNode, \"summary\")) {\n      return true;\n    }\n\n    if (focusableFormElements.has(elImpl._localName) && !isDisabled(elImpl)) {\n      if (elImpl._localName === \"input\" && elImpl.type === \"hidden\") {\n        return false;\n      }\n\n      return true;\n    }\n  }\n\n  return false;\n}; // https://html.spec.whatwg.org/multipage/interaction.html#fire-a-focus-event plus the steps of\n// https://html.spec.whatwg.org/multipage/interaction.html#focus-update-steps that adjust Documents to Windows\n\n\nexports.fireFocusEventWithTargetAdjustment = (name, target, relatedTarget) => {\n  if (target === null) {\n    // E.g. firing blur with nothing previously focused.\n    return;\n  }\n\n  const event = createAnEvent(name, FocusEvent, {\n    composed: true,\n    relatedTarget,\n    view: target._ownerDocument._defaultView,\n    detail: 0\n  });\n\n  if (target._defaultView) {\n    target = idlUtils.implForWrapper(target._defaultView);\n  }\n\n  target._dispatch(event);\n};","map":{"version":3,"sources":["/Users/liamfink/class-app/node_modules/jsdom/lib/jsdom/living/helpers/focusing.js"],"names":["nodeType","require","FocusEvent","idlUtils","isDisabled","firstChildWithLocalName","createAnEvent","HTML_NS","focusableFormElements","Set","exports","isFocusableAreaElement","elImpl","_ownerDocument","_defaultView","_nodeType","DOCUMENT_NODE","Number","isNaN","parseInt","getAttributeNS","_namespaceURI","_localName","hasAttributeNS","parentNode","has","type","fireFocusEventWithTargetAdjustment","name","target","relatedTarget","event","composed","view","detail","implForWrapper","_dispatch"],"mappings":"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","sourcesContent":["\"use strict\";\nconst nodeType = require(\"../node-type.js\");\nconst FocusEvent = require(\"../generated/FocusEvent.js\");\nconst idlUtils = require(\"../generated/utils.js\");\nconst { isDisabled } = require(\"./form-controls.js\");\nconst { firstChildWithLocalName } = require(\"./traversal\");\nconst { createAnEvent } = require(\"./events\");\nconst { HTML_NS } = require(\"./namespaces\");\n\nconst focusableFormElements = new Set([\"input\", \"select\", \"textarea\", \"button\"]);\n\n// https://html.spec.whatwg.org/multipage/interaction.html#focusable-area, but also some of\n// https://html.spec.whatwg.org/multipage/interaction.html#focusing-steps: e.g., Documents are not actually focusable\n// areas, but their viewports are, and the first step of the latter algorithm translates Documents to their viewports.\n// And also https://html.spec.whatwg.org/multipage/interaction.html#specially-focusable!\nexports.isFocusableAreaElement = elImpl => {\n  if (!elImpl._ownerDocument._defaultView && !elImpl._defaultView) {\n    return false;\n  }\n\n  if (elImpl._nodeType === nodeType.DOCUMENT_NODE) {\n    return true;\n  }\n\n  if (!Number.isNaN(parseInt(elImpl.getAttributeNS(null, \"tabindex\")))) {\n    return true;\n  }\n\n  if (elImpl._namespaceURI === HTML_NS) {\n    if (elImpl._localName === \"iframe\") {\n      return true;\n    }\n\n    if (elImpl._localName === \"a\" && elImpl.hasAttributeNS(null, \"href\")) {\n      return true;\n    }\n\n    if (elImpl._localName === \"summary\" && elImpl.parentNode &&\n        elImpl.parentNode._localName === \"details\" &&\n        elImpl === firstChildWithLocalName(elImpl.parentNode, \"summary\")) {\n      return true;\n    }\n\n    if (focusableFormElements.has(elImpl._localName) && !isDisabled(elImpl)) {\n      if (elImpl._localName === \"input\" && elImpl.type === \"hidden\") {\n        return false;\n      }\n\n      return true;\n    }\n  }\n\n  return false;\n};\n\n// https://html.spec.whatwg.org/multipage/interaction.html#fire-a-focus-event plus the steps of\n// https://html.spec.whatwg.org/multipage/interaction.html#focus-update-steps that adjust Documents to Windows\nexports.fireFocusEventWithTargetAdjustment = (name, target, relatedTarget) => {\n  if (target === null) {\n    // E.g. firing blur with nothing previously focused.\n    return;\n  }\n\n  const event = createAnEvent(name, FocusEvent, {\n    composed: true,\n    relatedTarget,\n    view: target._ownerDocument._defaultView,\n    detail: 0\n  });\n\n  if (target._defaultView) {\n    target = idlUtils.implForWrapper(target._defaultView);\n  }\n\n  target._dispatch(event);\n};\n"]},"metadata":{},"sourceType":"script"}